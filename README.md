# æ–°è¾¾å¿«é€’å‘è´§ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Node.js + SQLite çš„å¿«é€’å‘è´§ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç”¨æˆ·ç®¡ç†ã€å‘è´§è®°å½•è¿½è¸ªã€æ‰¿è¿äººç®¡ç†ã€æ•°æ®ç»Ÿè®¡å’Œå¯¼å‡ºåŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### åŸºç¡€åŠŸèƒ½
- **ç”¨æˆ·è®¤è¯** - æ”¯æŒç™»å½•ã€ç™»å‡ºã€å¯†ç ä¿®æ”¹
- **å‘è´§è®°å½•ç®¡ç†** - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å‘è´§è®°å½•
- **åŸºç¡€æ•°æ®ç®¡ç†** - æ‰¿è¿äººã€å‘ä»¶äººã€æ”¶è´§åœ°å€ç®¡ç†
- **æ•°æ®ç»Ÿè®¡** - æŒ‰æœˆä»½å’Œæ‰¿è¿äººç»Ÿè®¡å‘è´§é‡ã€é‡‘é¢ã€é‡é‡
- **æ•°æ®å¯¼å‡º** - æ”¯æŒå¯¼å‡º CSV æ ¼å¼æ•°æ®
- **å¤šç”¨æˆ·ç®¡ç†** - ä»…ç®¡ç†å‘˜å¯ç®¡ç†ç”¨æˆ·è´¦æˆ·

### ğŸš€ GitHub è‡ªåŠ¨æ›´æ–°ï¼ˆæ–°å¢ï¼‰
- **è‡ªåŠ¨æ£€æµ‹æ›´æ–°** - è‡ªåŠ¨æ£€æŸ¥ GitHub æœ€æ–°ç‰ˆæœ¬
- **ä¸€é”®æ›´æ–°** - ç®¡ç†å‘˜å¯ç‚¹å‡»æŒ‰é’®ç›´æ¥æ›´æ–°ç³»ç»Ÿ
- **ç‰ˆæœ¬ç®¡ç†** - è‡ªåŠ¨è®°å½•å½“å‰ç‰ˆæœ¬å’Œæ›´æ–°å†å²
- **å®‰å…¨æ›´æ–°** - æ•°æ®åº“ä¸ä¼šè¢«è¦†ç›–

## ğŸ“ é¡¹ç›®ç»“æ„

```
XINDA_express/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ server.js           # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â”œâ”€â”€ database.js         # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ db.js              # æ•°æ®åº“è¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ routes/            # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.js        # è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ carriers.js    # æ‰¿è¿äººç®¡ç†
â”‚   â”‚   â”œâ”€â”€ sellers.js     # å‘ä»¶äººç®¡ç†
â”‚   â”‚   â”œâ”€â”€ addresses.js   # æ”¶è´§åœ°å€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ shipments.js   # å‘è´§è®°å½•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ users.js      # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â””â”€â”€ update.js      # GitHubè‡ªåŠ¨æ›´æ–°API
â”‚   â”œâ”€â”€ update-config.json  # ç‰ˆæœ¬é…ç½®æ–‡ä»¶ï¼ˆä¼šæäº¤åˆ°GitHubï¼‰
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css      # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ api.js         # APIè°ƒç”¨æ¨¡å—
â”‚       â”œâ”€â”€ auth.js        # è®¤è¯å¤„ç†
â”‚       â””â”€â”€ app.js         # ä¸»åº”ç”¨é€»è¾‘
â”œâ”€â”€ Dockerfile             # Docker æ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # Docker Compose é…ç½®
â””â”€â”€ package.json           # é¡¹ç›®ä¾èµ–é…ç½®
```

## ğŸ“‚ æ•°æ®æŒä¹…åŒ–è¯´æ˜

æ•°æ®åº“ä½¿ç”¨ **Docker named volume** (`express-data`) æŒä¹…åŒ–ï¼š
- **å·åç§°**: `express-data`
- **æŒ‚è½½è·¯å¾„**: `/app/backend/database.sqlite`
- **ä¼˜ç‚¹**: 
  - è‡ªåŠ¨ç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºç›®å½•
  - æ•°æ®åº“ä¸ä»£ç åˆ†ç¦»
  - éƒ¨ç½²æ—¶æ— éœ€æ‰‹åŠ¨å¤„ç†æ•°æ®åº“æ–‡ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šç›´æ¥è¿è¡Œ

```bash
cd backend
npm install
npm start
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:6000` å¯åŠ¨

### æ–¹å¼2ï¼šDockeréƒ¨ç½²

```bash
# 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®ä»£ç 
git clone https://github.com/cruiseven/XINDA_Express.git
cd XINDA_Express

# 2. å¯åŠ¨å®¹å™¨ï¼ˆæ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰
docker-compose up -d
```

### âš ï¸ é‡è¦ï¼šæ•°æ®å¤‡ä»½

å¦‚æœéœ€è¦å¤‡ä»½æˆ–è¿ç§»æ•°æ®ï¼š

```bash
# å¤‡ä»½æ•°æ®å·
docker run --rm -v XINDA_express-express-data:/data -v $(pwd):/backup alpine tar czf /backup/backup.tar.gz -C /data .

# æ¢å¤æ•°æ®
docker run --rm -v XINDA_express-express-data:/data -v $(pwd):/backup alpine tar xzf /backup/backup.tar.gz -C /data
```

## ğŸ” é»˜è®¤è´¦å·

- **ç”¨æˆ·å**: `cruiseven`
- **å¯†ç **: `1qaz2wsx`

é¦–æ¬¡ç™»å½•åå»ºè®®ç«‹å³ä¿®æ”¹å¯†ç ï¼

## ğŸ“– ä½¿ç”¨è¯´æ˜

### 1. ç™»å½•ç³»ç»Ÿ
è®¿é—® `http://localhost:6000/login` æˆ– `http://localhost:6000`ï¼Œä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ã€‚

### 2. åŸºç¡€æ•°æ®é…ç½®
åœ¨æ·»åŠ å‘è´§è®°å½•å‰ï¼Œè¯·å…ˆé…ç½®ï¼š
- **æ‰¿è¿äººç®¡ç†** - æ·»åŠ åˆä½œçš„å¿«é€’å…¬å¸
- **å‘ä»¶äººç®¡ç†** - æ·»åŠ å¸¸ç”¨å‘ä»¶äººä¿¡æ¯
- **æ”¶è´§åœ°å€ç®¡ç†** - æ·»åŠ å¸¸ç”¨æ”¶è´§åœ°å€

### 3. å‘è´§è®°å½•æ“ä½œ
- ç‚¹å‡»ã€Œ+ æ·»åŠ å‘è´§è®°å½•ã€æ·»åŠ æ–°è®°å½•
- ä½¿ç”¨ç­›é€‰åŠŸèƒ½æŒ‰æœˆä»½ã€æ‰¿è¿äººã€çŠ¶æ€æŸ¥è¯¢
- æ”¯æŒå¯¼å‡ºå…¨éƒ¨æˆ–ç­›é€‰åçš„æ•°æ®ä¸º CSV

### 4. æ•°æ®ç»Ÿè®¡
- æŸ¥çœ‹æ€»å‘è´§é‡ã€æ€»é‡‘é¢ã€æ€»é‡é‡ç»Ÿè®¡
- æŒ‰æ‰¿è¿äººå’Œæœˆä»½æŸ¥çœ‹è¯¦ç»†ç»Ÿè®¡

### 5. ç³»ç»Ÿé…ç½®
åªæœ‰ç®¡ç†å‘˜ï¼ˆcruisevenï¼‰å¯ä»¥è®¿é—®ï¼š
- **ç”¨æˆ·ç®¡ç†** - æ·»åŠ /ç¦ç”¨ç”¨æˆ·è´¦æˆ·
- **ç³»ç»Ÿæ›´æ–°** - GitHub è‡ªåŠ¨æ›´æ–°åŠŸèƒ½

## ğŸ”„ GitHub è‡ªåŠ¨æ›´æ–°é…ç½®

### é…ç½®æ­¥éª¤

#### 1. åˆ›å»º GitHub Release

åœ¨ä½ çš„ GitHub ä»“åº“ä¸­åˆ›å»º Releaseï¼š

1. è¿›å…¥ä»“åº“ â†’ ç‚¹å‡» "Releases" â†’ "Create a new release"
2. Tag version: `v1.0.1`ï¼ˆç‰ˆæœ¬å·æ ¼å¼ï¼š`v*.*.*`ï¼‰
3. Release title: `v1.0.1`
4. ç‚¹å‡» "Publish release"

#### 2. è®¾ç½®ä»“åº“åœ°å€

**æ–¹å¼ä¸€ï¼šç¯å¢ƒå˜é‡**
```bash
# Windows PowerShell
setx GITHUB_REPO "ä½ çš„ç”¨æˆ·å/ä»“åº“å"
```

**æ–¹å¼äºŒï¼šç¼–è¾‘é…ç½®æ–‡ä»¶**
```json
// backend/update-config.json
{
  "currentVersion": "v1.0.0",
  "githubRepo": "ä½ çš„ç”¨æˆ·å/ä»“åº“å"
}
```

### ä½¿ç”¨æ›´æ–°åŠŸèƒ½

1. ä½¿ç”¨ `cruiseven` è´¦å·ç™»å½•
2. ç‚¹å‡»å·¦ä¾§èœå•çš„ã€Œç³»ç»Ÿé…ç½®ã€
3. åœ¨ã€Œç³»ç»Ÿæ›´æ–°ã€åŒºåŸŸæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
4. ç‚¹å‡»ã€ŒğŸ” æ£€æŸ¥æ›´æ–°ã€æ£€æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬
5. å¦‚æœæœ‰æ–°ç‰ˆæœ¬ï¼Œç‚¹å‡»ã€Œâ¬‡ï¸ ç«‹å³æ›´æ–°ã€
6. æ›´æ–°å®Œæˆååˆ·æ–°é¡µé¢

### æ›´æ–°è¯´æ˜

- âœ… **ä¼šæ›´æ–°**: å‰ç«¯æ–‡ä»¶ã€åç«¯ä»£ç ï¼ˆé™¤ database.jsï¼‰
- âŒ **ä¸ä¼šæ›´æ–°**: æ•°æ®åº“æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€node_modules

### æ›´æ–°æ—¥å¿—

æ›´æ–°æ—¥å¿—ä¿å­˜åœ¨ `backend/update-log.json`

## ğŸ”§ API æ¥å£

### è®¤è¯ç›¸å…³
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/check` - æ£€æŸ¥ç™»å½•çŠ¶æ€
- `POST /api/auth/change-password` - ä¿®æ”¹å¯†ç 

### æ•°æ®ç®¡ç†
- `GET/POST /api/carriers` - æ‰¿è¿äººç®¡ç†
- `GET/POST /api/sellers` - å‘ä»¶äººç®¡ç†
- `GET/POST /api/addresses` - æ”¶è´§åœ°å€ç®¡ç†
- `GET/POST /api/shipments` - å‘è´§è®°å½•ç®¡ç†
- `GET /api/shipments/summary` - å‘è´§ç»Ÿè®¡
- `GET /api/users` - ç”¨æˆ·ç®¡ç†

### ç³»ç»Ÿæ›´æ–°
- `GET /api/update/version` - è·å–å½“å‰ç‰ˆæœ¬
- `GET /api/update/check` - æ£€æŸ¥ GitHub æ›´æ–°
- `POST /api/update/execute` - æ‰§è¡Œæ›´æ–°
- `GET /api/update/logs` - è·å–æ›´æ–°æ—¥å¿—

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js + Express
- **æ•°æ®åº“**: SQLite (sql.js)
- **å‰ç«¯**: åŸç”Ÿ HTML/CSS/JavaScript
- **éƒ¨ç½²**: Docker

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-02-07)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ¨ å‘è´§è®°å½•ç®¡ç†
- âœ¨ æ‰¿è¿äººã€å‘ä»¶äººã€æ”¶è´§åœ°å€ç®¡ç†
- âœ¨ æ•°æ®ç»Ÿè®¡å’Œå¯¼å‡ºåŠŸèƒ½
- âœ¨ GitHub è‡ªåŠ¨æ›´æ–°åŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¤ ä½œè€…

**é‘«è¾¾æœºæ¢° (XINDA MACHINERY)**

---

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼
